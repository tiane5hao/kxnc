<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>产品列表</title>
    <link rel="stylesheet" type="text/css" href="../css/easyui.css">
    <link rel="stylesheet" type="text/css" href="../css/icon.css">
    <link rel="stylesheet" type="text/css" href="../css/demo.css">

</head>
<body>
<h1>商品列表</h1>

<div style="margin:20px 0;"></div>

<table id="tt" style="width: 700px;" title="商品列表" iconcls="icon-edit">

</table>

<p>----------------------------------------</p>
<h1>商品新增修改</h1>
<div class="easyui-panel" title="商品添加修改" style="width:400px">
    <div style="padding:10px 60px 20px 60px">
        <form id="productform" method="post" action="/product/addOrUpdateProduct">
            <table cellpadding="5">
                <input hidden name="productId">
                <tr>
                    <td>产品名称:</td>
                    <td><input class="easyui-textbox" type="text" name="productName" data-options="required:true"></input></td>
                </tr>
                <tr>
                    <td>产品价格:</td>
                    <td><input class="easyui-textbox" type="text" name="price" data-options="required:true"></input></td>
                </tr>
                <tr>
                    <td>产品图片:</td>
                    <td><input class="easyui-textbox" type="text" name="productUrl" data-options="required:true"></input></td>
                </tr>
                <tr>
                    <td>产品分类:</td>
                    <td>
                        <select class="webui-combobox" id="classify-order-back-certType" data-options="editable:false" style="width:142px;height: 28px;">
                            <option value="1">鸡鸭</option>
                            <option value="2">蛋</option>
                            <option value="3">青菜</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>上下架:</td>
                    <td>
                        <select class="webui-combobox" id="status-order-back-certType" data-options="editable:false" style="width:142px;height: 28px;">
                            <option value="1">上架</option>
                            <option value="2">下架</option>
                        </select>
                    </td>
                </tr>
            </table>
        </form>
        <div style="text-align:center;padding:5px">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="submitForm()">提交</a>
        </div>
    </div>
</div>

<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery.easyui.min.js"></script>
<script>
    $(function () {
        loadData();
    });
    //参数pars(Json格式)可以当做额外参数(搜索条件)传递到服务端。
    function loadData(pars) {
        $('#tt').datagrid({   //#tt是展示数据的表格ID
            url: '/admin/product/productList',   //MVC路由，可以不是MVC格式
            title: '产品列表',
            width: 700,
            height: 400,
            fitColumns: true, //列自适应
            nowrap: false,
            idField: 'ID',//主键列的列名
            loadMsg: '正在加载产品的信息...',
            pagination: true,//是否有分页
            singleSelect: false,//是否单行选择
            pageSize: 10,//页大小，一页多少条数据
            pageNumber: 1,//当前页，默认的
            pageList: [ 5, 10,15],   //可以设置的页大小的列表
            queryParams: pars,  //往后台额外传递的参数，(搜索条件)(Json格式)
            columns: [[//c.UserName, c.UserPass, c.Email, c.RegTime
                { field: 'ck', checkbox: true, align: 'left', width: 50 },  //额外添加的checkBox的列
                { field: 'productId', title: '产品编号', width: 80 },    //field属性必须和UserInfo的属性名对应。
                { field: 'productName', title: '产品名称', width: 120 },
                { field: 'price', title: '产品价格', width: 120 },
                { field: 'classifyId', title: '分类', width: 120 ,
                    formatter:function(value,row,index){
                        if(value==1){return '鸡'}
                        else if(value==2){return '鸭'}
                        else if(value==2){return '蛋'}
                        else if(value==2){return '肉'}
                        else if(value==2){return '蔬菜'}
                        else if(value==2){return '鸭'}

                    }
                },
                { field: 'status', title: '状态', width: 120 ,
                    formatter:function(value,row,index){
                        if(value==1){return '上架'}
                        else if(value==2){return '下架'}
                    }
                },
                { field: 'opt', title: '操作', width: 120 ,
                    formatter:function(value,row,index){
                        var str = '<span ><a class="easyui-linkbutton"  href="javascript:update(\'' + row.productId +'\');"  title="修改"></a></span>';
                        return str;
                    }
                }
            ]],
            toolbar: [ {
                id: 'btnEdit',
                text: '编辑',
                iconCls: 'icon-edit',
                handler: function () {
                    showEditInfo();
                }
            }]
        });
    }

    function update() {
        var row = grid.datagrid('getSelected');
        $('#productform').form('clear');

        if (row){
            win.window('open');
            alert("row内容"+row);
            $('#productform').form('load', row);
            form.url = 'UserlistAction!update.action';
        } else {
            $.messager.show({
                title:'警告',
                msg:'请先选择用户资料。'
            });
        }
    }

    function submitForm(){
        $('#productform').form('submit');
    }
</script>
</body>
</html>